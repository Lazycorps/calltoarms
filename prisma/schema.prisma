datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
    //shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

generator client {
    provider      = "prisma-client-js"
    binaryTargets = ["native", "rhel-openssl-1.0.x", "debian-openssl-3.0.x"]
}

model User {
    id         String   @id
    name       String
    slug       String
    createDate DateTime @default(now())
    updateDate DateTime @default(now())
    admin      Boolean  @default(false)
    friends    Friend[] @relation("user_friends")
    friendsOf  Friend[] @relation("friend_friends")
}

model Game {
    id          Int       @id @default(autoincrement())
    title       String
    description String?
    releaseDate DateTime?
    imageUrl    String?
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @updatedAt
}

model Friend {
    id        Int          @id @default(autoincrement())
    userId    String
    friendId  String
    status    FriendStatus @default(PENDING)
    user      User         @relation("user_friends", fields: [userId], references: [id])
    friend    User         @relation("friend_friends", fields: [friendId], references: [id])
    createdAt DateTime     @default(now())
    updatedAt DateTime     @updatedAt

    @@unique([userId, friendId])
}

enum FriendStatus {
    PENDING
    ACCEPTED
    DECLINED
    BLOCKED
}
